<br>
<br>
<br>
<br>
<br>
<br>
<br>
<mat-spinner *ngIf="!found" style="margin :90px 43%;"></mat-spinner>
<div *ngIf="found">
    <div class="container  thumbnail box-shadow">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="row" style="padding:7px 0px 0 0;">
                        <iframe width=100% height=350px [src]="member[0].courseVLink | safe" frameborder="0" webkitallowfullscreen mozallowfullscreen
                            allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-6">
                <div class="row">
                    <div class="col-sm-12 col-md-8 col-lg-8 col-xs-12">
                        <img src={{member[0].courseEntity.courseImagepath}} alt="Error" style="margin-top:8px;width:200px;height:200px;" />
                        <h3 class="text-primary">{{member[0].courseEntity.courseName}}</h3>
                    </div>
                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="row" style="margin-left:3px">
                            <div class="col-sm-6 col-md-12 col-xs-12">
                                <br><br>
                                <p class="glyphicon glyphicon-expand"> {{member[0].courseEntity.noOfLectures}} Lectures</p>
                                <br><br>
                            </div>
                            <div class="col-sm-6 col-md-12 col-xs-12">
                                <p class="glyphicon glyphicon-time"> {{member[0].courseEntity.courseDuration}}</p>
                                <br><br>
                            </div>
                            <div class="col-sm-6 col-md-12 col-xs-12">
                                <p class="glyphicon glyphicon-signal"> {{member[0].courseEntity.levelName}}</p>
                                <br><br>
                            </div>
                            <div class="col-sm-6 col-md-12 col-xs-12">
                                <p class="az glyphicon glyphicon-star-empty"> {{avgStars | number:'1.1-1'}} </p>
                                <br><br>
                            </div>
                            <div class="col-sm-6 col-md-12 col-xs-12">
                                <p class="az glyphicon glyphicon-user"> {{length | number}}</p>
                                <br>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-xs-12">
                        <div class="col-sm-12 col-md-4 col-xs-12">
                            <div *ngIf="member[0].courseEntity.coursePrice!=0">
                                <h2><span class="text-primary">&#x20B9;{{member[0].courseEntity.coursePrice}}</span></h2>
                            </div>
                            <div *ngIf="member[0].courseEntity.coursePrice==0">
                                <h2><span class="text-primary">FREE</span></h2>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-xs-12">
                            <h3 class="az text-danger text-lg">{{member[0].courseEntity.courseProviderId.userName}}</h3>
                        </div>
                        <div class="col-sm-12 col-md-4 col-xs-12">
                            <a target="_blank" [href]="member[0].courseEntity.coursePath | safe"><button type="button" class="btn btn-success">Start Course</button></a>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        
        <mat-tab-group class="demo-tab-group" (selectedTabChange)="checkLogin()">
            <mat-tab label="Description">

                <div class="container-fluid" style="white-space:pre-wrap;">
                    <p id="courseDesc">{{member[0].courseDescription}}</p>
                </div>

            </mat-tab>
            <mat-tab label="Reviews">

                <mat-spinner *ngIf="length == null" style="margin :50px 40%;"></mat-spinner>



                <div class="container-fluid" *ngIf="length != null" style="height:500px;">
                    <div class="container" style="width:85%;">
                        <div class="row" style="margin:10px;" *ngIf="!reviewButton">

                            <a [routerLink]="['/login']"><input style="float:right" type="submit" class="btn btn-primary" value="Login To Review"></a>

                            <h4 style="float:right">Liked ? Give us your valuable feedback <span class="glyphicon glyphicon-chevron-right">  &nbsp;&nbsp;</span></h4>
                        </div>
                        <div *ngIf="reviewButton" class="row" style="margin:10px;">
                            <input style="float:right" type="submit" class="btn btn-primary" value="Give Review" data-toggle="modal" data-target="#Certificate"
                                >
                            <h4 style="float:right">Liked ? Give us your valuable feedback <span class="glyphicon glyphicon-chevron-right">  &nbsp;&nbsp;</span></h4>

                        </div>
                    </div>
                    <div class="row" *ngFor="let item of ratings" style="width:95%;margin:10px auto;">

                        <mat-card>
                            <div class="row">

                                <mat-card-header>
                                    <div class="col-md-1 col-xs-1">
                                        <span class="circle text-capitalize">{{item.userId.userName | firstLetter}}</span>
                                    </div>
                                    <div class="col-md-5 col-xs-5" style="margin-left:7px;">
                                        <mat-card-title>
                                            <h3 class="mat-title text-capitalize" style="padding-left:15px;">{{item.userId.userName}}</h3>
                                        </mat-card-title>
                                        <mat-card-subtitle *ngIf="item.rating === 4" style="padding-left:15px;">
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                        </mat-card-subtitle>
                                        <mat-card-subtitle *ngIf="item.rating === 5" style="padding-left:15px;">
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                        </mat-card-subtitle>
                                        <mat-card-subtitle *ngIf="item.rating === 3" style="padding-left:15px;">
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>

                                        </mat-card-subtitle>
                                        <mat-card-subtitle *ngIf="item.rating === 2" style="padding-left:15px;">
                                            <i class="fa fa-star" aria-hidden="true"></i>
                                            <i class="fa fa-star" aria-hidden="true"></i>

                                        </mat-card-subtitle>
                                        <mat-card-subtitle *ngIf="item.rating === 1" style="padding-left:15px;">
                                            <i class="fa fa-star" aria-hidden="true"></i>

                                        </mat-card-subtitle>
                                    </div>
                                    <div class="col-md-5 col-xs-5">
                                        <div class="row">
                                            <mat-card-title style="float:right;">{{item.date}}</mat-card-title>
                                        </div>
                                        <div class="row">
                                            <mat-card-subtitle style="float:right;">{{item.time}}</mat-card-subtitle>
                                        </div>
                                    </div>
                                </mat-card-header>
                                <!--<div style="width:75%;margin: 0 auto;" clas-->
                                <mat-card-content style="width:95%;margin: 0 auto;">
                                    <p class="Mytext">
                                        {{item.message}}
                                    </p>
                                </mat-card-content>
                            </div>
                        </mat-card>
                    </div>

                </div>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>


<div class="modal fade" style="z-index:6666;" id="Certificate" tabindex="-1" role="dialog" aria-labelledby="Certificate" aria-hidden="false">

    <div class="modal-dialog">
        <div class="modal-content">
            <form [formGroup]="myform" (ngSubmit)="postReview()">
            <div class="modal-header modal-header-success">
                
            </div>
            <div class="modal-body">
                <div class="alert alert-success" *ngIf="saved"><p class="text-success" >Successfully Saved</p></div>
<h4 class="text-primary">Give Review</h4>

                <div class="example-container">
                    <div class="alert alert-danger" *ngIf="(message.touched && message.invalid) || (rating.touched && rating.invalid) ">
                        <div *ngIf="message.touched && message.invalid && message.errors.required">It can't be empty</div>
                        <div *ngIf="message.touched && message.invalid && message.errors.maxlength">Maximum length can be only 500 characters</div>
                        <div *ngIf="message.touched && message.invalid && message.errors.minlength">Review must be of 10 Characters</div>
                        </div>
                <label>Review Message</label>
                    <textarea class="input-xlarge" formControlName="message"></textarea>
               

                <label>Ratings (Stars)</label>
                <select class="input-xlarge" formControlName="rating">
                    <option  value="1" [selected]="true">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    </select>
            </div>
            
            </div>
            <div class="modal-footer">
                <input type="submit" [disabled]="!myform.valid" class="btn btn-primary" value="Submit" />
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
            </div>
            </form>
        </div>

    </div>